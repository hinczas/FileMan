@model FileMan.Models.IndexViewModel
@{
    ViewBag.Title = "Manage";
}
<style>
    .toggleDiv {
        float: right;
    }
    .profile {
        width: 100%;
        height: 300px;
        margin: 20px 15px 15px 15px;
        border: 0px solid;
        border-radius: 3px;
        box-shadow: 0px 0px 5px grey;
        text-align:center;
    }
    .settings {
        width: 100%;
        margin: 20px 15px 15px 15px;
        padding: 15px;
        border: 0px solid;
        border-radius: 3px;
        box-shadow: 0px 0px 5px grey;
    }
    dt, dd {
        margin-bottom:2px;
    }
    .avatar {
        width:60%;
    }
</style>

<link href="~/Content/bootstrap-toggle.min.css" rel="stylesheet" />

<div class="col-md-3">
    <div class="profile">
        <img src="~/Content/Images/no-avatar.png" class="avatar" />
        <br />
        @using Microsoft.AspNet.Identity
        @if (Request.IsAuthenticated)
        {
            <p><a href="mailto:@User.Identity.GetUserName()">@User.Identity.GetUserName() </a><br /></p>
        }
            <dl class="dl-horizontal">
                <dt style="width:80px;">
                    name:
                </dt>
                <dd style="margin-left:85px; padding-left:5px; text-align:left;">
                    @Model.FirstName
                </dd>
                <dt style="width:80px;">
                    surname:
                </dt>
                <dd style="margin-left:85px; padding-left:5px; text-align:left;">
                    @Model.Surname
                </dd>
                @*<dt style="width:80px;">
                    phone:
                </dt>
                <dd style="margin-left:5px;">
                    @if (string.IsNullOrEmpty(@Model.PhoneNumber))
                    {
                        @Html.ActionLink("add", "AddPhoneNumber")
                    }
                    else
                    {
                        @Model.PhoneNumber
                    }
                </dd>*@
                <dt style="width:80px;">
                    joined:
                </dt>
                <dd style="margin-left:85px; padding-left:5px; text-align:left;">
                    @Model.JoinDate
                </dd>
            </dl>
    </div>
</div>
<div class="col-md-9">
    <div class="settings">
        <p class="text-success">@ViewBag.StatusMessage</p>
        <div>
            <h4>Account</h4>
            <hr />
            <dl class="dl-horizontal">
                <dt>Password:</dt>
                <dd>
                    [
                    @if (Model.HasPassword)
                    {
                        @Html.ActionLink("Change your password", "ChangePassword")
                    }
                    else
                    {
                        @Html.ActionLink("Create", "SetPassword")
                    }
                    ]
                </dd>
                <dt>External Logins:</dt>
                <dd>
                    @Model.Logins.Count [
                    @Html.ActionLink("Manage", "ManageLogins") ]
                </dd>
                @*
            Phone Numbers can used as a second factor of verification in a two-factor authentication system.

             See <a href="https://go.microsoft.com/fwlink/?LinkId=403804">this article</a>
                for details on setting up this ASP.NET application to support two-factor authentication using SMS.

             Uncomment the following block after you have set up two-factor authentication
                *@
                
            @*<dt>Phone Number:</dt>
            <dd>
                @(Model.PhoneNumber ?? "None")
                @if (Model.PhoneNumber != null)
                {
                    <br />
                    <text>[&nbsp;&nbsp;@Html.ActionLink("Change", "AddPhoneNumber")&nbsp;&nbsp;]</text>
                    using (Html.BeginForm("RemovePhoneNumber", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                    {
                        @Html.AntiForgeryToken()
                        <text>[<input type="submit" value="Remove" class="btn-link" />]</text>
                    }
                }
                else
                {
                    <text>[&nbsp;&nbsp;@Html.ActionLink("Add", "AddPhoneNumber")]</text>
                }
            </dd>*@
                
                <dt>Two-Factor Auth:</dt>
                <dd>
                    <p>
                        There are no two-factor authentication providers configured. See <a href="https://go.microsoft.com/fwlink/?LinkId=403804">this article</a>
                        for details on setting up this ASP.NET application to support two-factor authentication.
                    </p>
                    @*@if (Model.TwoFactor)
                {
                    using (Html.BeginForm("DisableTwoFactorAuthentication", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                    {
                        @Html.AntiForgeryToken()
                        <text>Enabled
                        <input type="submit" value="Disable" class="btn btn-link" />
                        </text>
                    }
                }
                else
                {
                    using (Html.BeginForm("EnableTwoFactorAuthentication", "Manage", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                    {
                        @Html.AntiForgeryToken()
                        <text>Disabled
                        <input type="submit" value="Enable" class="btn btn-link" />
                        </text>
                    }
                }*@
                </dd>
            </dl>


            <h4>Layout</h4>
            <hr />
            @using (Html.BeginForm("SaveSettings", "Manage", FormMethod.Post, new { style = "padding-left: 0px;" }))
            {
                @Html.AntiForgeryToken()
                <input type="hidden" name="Id" value=@Model.SettingsId />
                <dl class="dl-horizontal">
                    <dt>
                        <input type="checkbox" @(Model.UncatVisible ? "checked" : "") name="UncategorisedVisible" data-toggle="toggle" data-size="mini" />
                    </dt>
                    <dd>
                        Show <b>uncategorised</b> documents
                    </dd>
                    <dt>
                        <input type="checkbox" @(Model.ShowOnRoot ? "checked" : "") data-toggle="toggle" name="ShowUncategorisedRoot" data-size="mini" />
                    </dt>
                    <dd>
                        Show <b>uncategorised</b> documents in the root directory <b>only</b>
                    </dd>
                    <dt>
                        <input type="checkbox" @(Model.ShowChangelog ? "checked" : "") data-toggle="toggle" name="ShowChangelog" data-size="mini" />
                    </dt>
                    <dd>
                        Show <b>changelog</b> on document details page
                    </dd>
                    <dt>
                        <input type="checkbox" @(Model.UseDocuViewer ? "checked" : "") data-toggle="toggle" name="UseDocuViewer" data-size="mini" />
                    </dt>
                    <dd>
                        Use third party <b>DocuViewer</b> to open even more documents in browser (e.g.: docx)
                    </dd>
                </dl>

                    <div class="container" style="align-items:center; width:100%; padding:0px;">
                        <input type="submit" value="Save" class="btn btn-success" id="submitBtn" style="float:right;" />
                    </div>
                    }
            </div>
    </div>    
</div>


@section scripts
{
    <script src="~/Scripts/bootstrap-toggle.min.js"></script>

}
